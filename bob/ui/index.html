<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>B.O.B - Boring Organizer Bot</title>
    <link rel="stylesheet" href="/static/css/main.css" />
    <link
      rel="icon"
      href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üìö</text></svg>"
    />
  </head>
  <body>
    <div id="app">
      <!-- Header -->
      <header class="header">
        <div class="header-brand">
          <span class="logo">üìö</span>
          <span class="brand-name">B.O.B</span>
        </div>
        <nav class="header-nav">
          <a href="#ask" class="nav-link active" data-page="ask">Ask</a>
          <a href="#routines" class="nav-link" data-page="routines">Routines</a>
          <a href="#library" class="nav-link" data-page="library">Library</a>
          <a href="#indexing" class="nav-link" data-page="indexing">Indexing</a>
          <a href="#settings" class="nav-link" data-page="settings">Settings</a>
          <a href="#health" class="nav-link" data-page="health">Health</a>
        </nav>
        <div class="header-actions">
          <button id="new-note-btn" class="btn btn-primary btn-sm" type="button">
            New note
          </button>
        </div>
      </header>

      <!-- Main Content -->
      <main class="main">
        <!-- Ask Page (Default) -->
        <div id="page-ask" class="page active">
          <div class="ask-layout">
            <!-- Filters Sidebar -->
            <aside class="filters-sidebar">
              <h3 class="sidebar-title">Filters</h3>

              <div class="filter-group">
                <label class="filter-label">Projects</label>
                <div id="project-filters" class="checkbox-list">
                  <!-- Populated by JS -->
                  <div class="loading-placeholder">Loading...</div>
                </div>
              </div>

              <div class="filter-group">
                <label class="filter-label">Document Types</label>
                <div class="checkbox-list">
                  <label class="checkbox-item">
                    <input
                      type="checkbox"
                      name="type"
                      value="markdown"
                      checked
                    />
                    <span>Markdown</span>
                  </label>
                  <label class="checkbox-item">
                    <input type="checkbox" name="type" value="pdf" checked />
                    <span>PDF</span>
                  </label>
                  <label class="checkbox-item">
                    <input type="checkbox" name="type" value="docx" checked />
                    <span>Word</span>
                  </label>
                  <label class="checkbox-item">
                    <input type="checkbox" name="type" value="xlsx" checked />
                    <span>Excel</span>
                  </label>
                  <label class="checkbox-item">
                    <input type="checkbox" name="type" value="recipe" checked />
                    <span>Recipe</span>
                  </label>
                </div>
              </div>

              <div class="filter-group">
                <label class="filter-label" for="decision-status-filter">
                  Decision Status
                </label>
                <select id="decision-status-filter" class="select-input">
                  <option value="">Any</option>
                  <option value="active">Active</option>
                  <option value="superseded">Superseded</option>
                  <option value="deprecated">Deprecated</option>
                </select>
              </div>

              <div class="filter-group">
                <label class="filter-label" for="language-filter">Language</label>
                <input
                  type="text"
                  id="language-filter"
                  class="text-input"
                  placeholder="en"
                />
              </div>

              <div class="filter-group">
                <label class="filter-label">Date Range</label>
                <input
                  type="date"
                  id="date-after"
                  class="date-input"
                  placeholder="After"
                />
                <input
                  type="date"
                  id="date-before"
                  class="date-input"
                  placeholder="Before"
                />
              </div>
            </aside>

            <!-- Query + Answer -->
            <section class="query-section">
              <form id="ask-form" class="query-form">
                <div class="query-input-wrapper">
                  <input
                    type="text"
                    id="query-input"
                    class="query-input"
                    placeholder="What would you like to know?"
                    autocomplete="off"
                    autofocus
                  />
                  <button type="submit" class="query-submit" id="submit-btn">
                    <span class="submit-text">Ask</span>
                    <span class="submit-loading hidden">...</span>
                  </button>
                </div>
                <div class="query-hints">
                  <kbd>/</kbd> to focus &nbsp;¬∑&nbsp; <kbd>Enter</kbd> to search
                </div>
              </form>
              <div class="coach-toggle">
                <label class="coach-toggle-label">
                  <input type="checkbox" id="coach-toggle" />
                  <span>Coach Mode</span>
                </label>
                <span id="coach-mode-status" class="coach-mode-status"
                  >Boring B.O.B</span
                >
              </div>

              <div id="answer-container" class="answer-container">
                <!-- Welcome state -->
                <div id="welcome-state" class="welcome-state">
                  <div class="welcome-icon">üìö</div>
                  <h2>What would you like to know?</h2>
                  <p class="welcome-tagline">
                    Every answer is grounded in your documents. No hallucinations, just citations.
                  </p>
                  <div class="welcome-hints">
                    <div class="welcome-hint">
                      <span class="hint-icon">‚ú®</span>
                      <span class="hint-text">Ask about decisions, notes, or anything you've indexed</span>
                    </div>
                    <div class="welcome-hint">
                      <span class="hint-icon">üîó</span>
                      <span class="hint-text">Click any source to jump directly to the original</span>
                    </div>
                    <div class="welcome-hint">
                      <span class="hint-icon">üõ°Ô∏è</span>
                      <span class="hint-text">100% local - your data never leaves your machine</span>
                    </div>
                  </div>
                  <div id="welcome-stats" class="welcome-stats"></div>
                </div>

                <!-- Answer content (hidden until query) -->
                <div id="answer-content" class="answer-content hidden">
                  <div class="answer-text" id="answer-text"></div>

                  <!-- Mandatory Footer -->
                  <div class="answer-footer" id="answer-footer">
                    <div class="footer-item">
                      <span class="footer-label">Sources:</span>
                      <span id="source-count">0</span>
                    </div>
                    <div class="footer-item">
                      <span class="footer-label">Date Confidence:</span>
                      <span id="date-confidence" class="confidence-badge"
                        >-</span
                      >
                    </div>
                    <div class="footer-item" id="outdated-warning-container">
                      <!-- Warning shown if any sources may be outdated -->
                    </div>
                  </div>
                  <div class="answer-actions">
                    <button
                      id="copy-report-btn"
                      class="btn btn-secondary btn-sm"
                      type="button"
                      disabled
                    >
                      Copy as report
                    </button>
                    <span
                      id="copy-report-status"
                      class="copy-report-status hidden"
                    >
                      Copied
                    </span>
                  </div>
                  <div id="answer-feedback" class="answer-feedback">
                    <span class="feedback-label">Feedback:</span>
                    <div id="feedback-buttons" class="feedback-buttons">
                      <button
                        type="button"
                        class="btn btn-secondary btn-sm"
                        data-feedback="helpful"
                      >
                        Helpful
                      </button>
                      <button
                        type="button"
                        class="btn btn-secondary btn-sm"
                        data-feedback="wrong_source"
                      >
                        Wrong or missing source
                      </button>
                      <button
                        type="button"
                        class="btn btn-secondary btn-sm"
                        data-feedback="outdated"
                      >
                        Outdated
                      </button>
                      <button
                        type="button"
                        class="btn btn-secondary btn-sm"
                        data-feedback="too_long"
                      >
                        Too long
                      </button>
                      <button
                        type="button"
                        class="btn btn-secondary btn-sm"
                        data-feedback="didnt_answer"
                      >
                        Didn‚Äôt answer
                      </button>
                    </div>
                    <span id="feedback-status" class="feedback-status hidden"></span>
                  </div>
                  <div id="coach-suggestions" class="coach-suggestions hidden">
                    <h4>Suggestions (Coach Mode)</h4>
                    <ol
                      id="coach-suggestions-list"
                      class="coach-suggestions-list"
                    ></ol>
                  </div>
                </div>

                <!-- Not found state -->
                <div id="not-found-state" class="not-found-state hidden">
                  <div class="not-found-icon">üîç</div>
                  <h3>No matches found</h3>
                  <p id="not-found-query" class="not-found-query-text"></p>
                  <div class="not-found-actions">
                    <div class="not-found-action">
                      <span class="action-icon">üí°</span>
                      <div class="action-content">
                        <strong>Try different keywords</strong>
                        <p>Rephrase your question or use specific terms from your documents</p>
                      </div>
                    </div>
                    <div class="not-found-action">
                      <span class="action-icon">üìÇ</span>
                      <div class="action-content">
                        <strong>Check your library</strong>
                        <p>Make sure the relevant documents are indexed</p>
                        <a href="#library" class="btn btn-secondary btn-sm">Browse Library</a>
                      </div>
                    </div>
                    <div class="not-found-action">
                      <span class="action-icon">‚ûï</span>
                      <div class="action-content">
                        <strong>Index more content</strong>
                        <p>Add folders containing the information you need</p>
                        <a href="#indexing" class="btn btn-primary btn-sm">Go to Indexing</a>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- Error state -->
                <div id="error-state" class="error-state hidden">
                  <div class="error-icon">‚ö†Ô∏è</div>
                  <h3>Something went wrong</h3>
                  <p id="error-message" class="error-message-text"></p>
                  <div class="error-actions">
                    <button type="button" class="btn btn-primary btn-sm" onclick="location.reload()">Reload page</button>
                    <a href="#health" class="btn btn-secondary btn-sm">Check system health</a>
                  </div>
                </div>
              </div>
            </section>

            <!-- Sources Panel -->
            <aside class="sources-sidebar">
              <div class="sidebar-header">
                <h3 class="sidebar-title">Sources</h3>
                <div class="sidebar-tabs">
                  <button class="sidebar-tab active" data-panel="sources">
                    Sources
                  </button>
                  <button class="sidebar-tab" data-panel="audit">Audit</button>
                </div>
              </div>
              <div id="sources-panel" class="sidebar-panel active">
                <div id="sources-list" class="sources-list">
                  <div class="sources-empty">
                    <p>Sources will appear here after you ask a question.</p>
                  </div>
                </div>
              </div>
              <div id="audit-panel" class="sidebar-panel">
                <div id="audit-list" class="audit-list">
                  <div class="sources-empty">
                    <p>Audit details will appear after you ask a question.</p>
                  </div>
                </div>
              </div>
            </aside>
          </div>
        </div>

        <!-- Routines Page -->
        <div id="page-routines" class="page">
          <div class="routines-layout">
            <section class="routine-actions-panel">
              <div class="section-header">
                <h2>Routines</h2>
                <p class="section-subtitle">
                  Quick workflows that render templates with cited context.
                </p>
              </div>
              <div id="routine-actions-list" class="routine-actions-list">
                <div class="loading-placeholder">
                  Select a routine to discover the citations that will feed it.
                </div>
              </div>
            </section>
            <section class="routine-preview-panel">
              <div class="routine-preview-header">
                <div>
                  <h3 id="routine-preview-title">Select a routine</h3>
                  <p id="routine-preview-description" class="section-subtitle">
                    Run a routine to render its canonical template, review warnings, and inspect the retrieved sources before the write.
                  </p>
                </div>
                <button id="run-selected-routine" class="btn btn-primary" disabled>
                  Run routine
                </button>
              </div>
              <div class="routine-options">
                <label class="form-label">
                  Project
                  <input
                    type="text"
                    id="routine-project-input"
                    class="text-input"
                    placeholder="Optional project override"
                    list="routine-project-options"
                  />
                </label>
                <datalist id="routine-project-options"></datalist>
                <label class="form-label">
                  Date
                  <input type="date" id="routine-date-input" class="text-input" />
                </label>
                <label class="form-label">
                  Top K
                  <input
                    type="number"
                    id="routine-topk-input"
                    class="text-input"
                    min="1"
                    max="20"
                    value="5"
                  />
                </label>
                <label class="form-label routine-field hidden" data-routines="meeting-prep meeting-debrief">
                  Meeting slug
                  <input
                    type="text"
                    id="routine-meeting-slug"
                    class="text-input"
                    placeholder="team-sync"
                  />
                </label>
                <label class="form-label routine-field hidden" data-routines="meeting-prep meeting-debrief">
                  Meeting date
                  <input type="date" id="routine-meeting-date" class="text-input" />
                </label>
                <label class="form-label routine-field hidden" data-routines="meeting-prep meeting-debrief">
                  Participants (comma-separated)
                  <input
                    type="text"
                    id="routine-meeting-participants"
                    class="text-input"
                    placeholder="Avery, Sam"
                  />
                </label>
                <label class="form-label routine-field hidden" data-routines="new-decision">
                  Decision title
                  <input
                    type="text"
                    id="routine-decision-title"
                    class="text-input"
                    placeholder="Logging approach"
                  />
                </label>
                <label class="form-label routine-field hidden" data-routines="new-decision">
                  Decision slug
                  <input
                    type="text"
                    id="routine-decision-slug"
                    class="text-input"
                    placeholder="logging-approach"
                  />
                </label>
                <label class="form-label routine-field hidden" data-routines="trip-debrief trip-plan">
                  Trip name
                  <input
                    type="text"
                    id="routine-trip-name"
                    class="text-input"
                    placeholder="kyoto-2025"
                  />
                </label>
                <label class="form-label routine-field hidden" data-routines="trip-debrief trip-plan">
                  Trip slug
                  <input
                    type="text"
                    id="routine-trip-slug"
                    class="text-input"
                    placeholder="kyoto-2025"
                  />
                </label>
                <label class="form-label routine-field hidden" data-routines="trip-plan">
                  Trip dates
                  <input
                    type="text"
                    id="routine-trip-dates"
                    class="text-input"
                    placeholder="2025-03-01 - 2025-03-10"
                  />
                </label>
              </div>
              <div id="routine-status" class="routine-status hidden"></div>
              <div id="routine-warnings" class="routine-warnings"></div>
              <div class="routine-preview-body">
                <div class="routine-preview-info" id="routine-preview-info"></div>
                <h4>Preview</h4>
                <pre id="routine-preview-content" class="routine-preview-content">Run a routine to preview the generated note.</pre>
              </div>
            </section>
            <section class="routine-citations-panel">
              <h3>Retrievals & Citations</h3>
              <div id="routine-retrievals" class="routine-retrievals">
                <div class="loading-placeholder">
                  Retrieval buckets will populate after a routine run.
                </div>
              </div>
            </section>
          </div>
        </div>

        <!-- Library Page -->
        <div id="page-library" class="page">
          <div class="library-layout">
            <aside class="filters-sidebar">
              <h3 class="sidebar-title">Filters</h3>

              <div class="filter-group">
                <label class="filter-label">Project</label>
                <select id="library-project-filter" class="select-input">
                  <option value="">All Projects</option>
                </select>
              </div>

              <div class="filter-group">
                <label class="filter-label">Type</label>
                <select id="library-type-filter" class="select-input">
                  <option value="">All Types</option>
                  <option value="markdown">Markdown</option>
                  <option value="pdf">PDF</option>
                  <option value="docx">Word</option>
                  <option value="xlsx">Excel</option>
                  <option value="recipe">Recipe</option>
                </select>
              </div>

              <div class="filter-group">
                <label class="filter-label">Sort By</label>
                <select id="library-sort" class="select-input">
                  <option value="date_desc">Newest First</option>
                  <option value="date_asc">Oldest First</option>
                  <option value="name_asc">Name A-Z</option>
                  <option value="name_desc">Name Z-A</option>
                </select>
              </div>
            </aside>

            <section class="document-list-section">
              <div class="section-header">
                <h2>Documents</h2>
                <span id="document-count" class="document-count"
                  >Loading...</span
                >
              </div>
              <div id="document-list" class="document-list">
                <!-- Populated by JS -->
              </div>
              <div id="load-more-container" class="load-more-container hidden">
                <button id="load-more-btn" class="btn btn-secondary">
                  Load More
                </button>
              </div>
            </section>
          </div>
        </div>

        <!-- Indexing Page -->
        <div id="page-indexing" class="page">
          <div class="indexing-layout">
            <section class="indexing-section">
              <h2>Index Documents</h2>

              <form id="index-form" class="index-form">
                <div class="form-group">
                  <label for="index-path" class="form-label"
                    >Path to index</label
                  >
                  <div class="index-path-row">
                    <input
                      type="text"
                      id="index-path"
                      class="text-input"
                      placeholder="/path/to/documents"
                    />
                    <button
                      type="button"
                      id="path-open-btn"
                      class="btn btn-secondary btn-sm"
                    >
                      Open in Explorer
                    </button>
                  </div>
                </div>
                <div class="form-group">
                  <label for="index-project" class="form-label"
                    >Project name</label
                  >
                  <input
                    type="text"
                    id="index-project"
                    list="index-project-options"
                    class="text-input"
                    placeholder="my-project"
                  />
                  <datalist id="index-project-options"></datalist>
                </div>
                <button
                  type="submit"
                  class="btn btn-primary"
                  id="start-index-btn"
                >
                  Start Indexing
                </button>
              </form>

              <div id="index-feedback" class="index-feedback hidden"></div>
              <p class="watchlist-tip">
                Save repeat targets with <code>bob watchlist add /path --project my-project</code>
                and run <code>bob index --watchlist</code> to refresh them.
              </p>

              <!-- Job Progress -->
              <div id="job-progress" class="job-progress hidden">
                <h3>Current Index Job</h3>
                <div class="job-meta">
                  <div>
                    <span class="job-meta-label">Path</span>
                    <span id="job-path" class="job-meta-value">‚Äî</span>
                  </div>
                  <div>
                    <span class="job-meta-label">Project</span>
                    <span id="job-project" class="job-meta-value">‚Äî</span>
                  </div>
                  <div>
                    <span class="job-meta-label">Started</span>
                    <span id="job-started" class="job-meta-value">‚Äî</span>
                  </div>
                </div>
                <div class="progress-bar-container">
                  <div class="progress-bar" id="progress-bar"></div>
                </div>
                <div class="progress-details">
                  <span id="progress-status">Starting...</span>
                  <div class="progress-meta">
                    <span id="progress-percent">0%</span>
                    <span class="progress-files-meta">
                      <span id="job-processed-files">0</span> /
                      <span id="job-total-files">0</span> files
                    </span>
                  </div>
                </div>
                <div id="progress-files" class="progress-files"></div>
              </div>

              <!-- Job Result -->
              <div id="job-result" class="job-result hidden">
                <h3>Indexing Complete</h3>
                <div class="result-stats">
                  <div class="stat">
                    <span class="stat-value" id="result-files">0</span>
                    <span class="stat-label">Files processed</span>
                  </div>
                  <div class="stat">
                    <span class="stat-value" id="result-documents">0</span>
                    <span class="stat-label">Documents indexed</span>
                  </div>
                  <div class="stat">
                    <span class="stat-value" id="result-chunks">0</span>
                    <span class="stat-label">Chunks created</span>
                  </div>
                </div>
                <div id="job-errors" class="job-errors hidden"></div>
              </div>

              <div class="indexing-summary">
                <h3>Last index run</h3>
                <p id="last-index-summary">
                  No indexing activity recorded yet. Once you run a job, results will surface here.
                </p>
              </div>

              <div class="indexing-history">
                <div class="history-header">
                  <h3>Recent jobs</h3>
                  <button id="clear-history-btn" class="btn btn-secondary btn-sm">
                    Clear history
                  </button>
                </div>
                <div id="job-history-list" class="job-history-list">
                  <div class="history-empty">
                    Recent jobs will appear here along with stats and errors.
                  </div>
                </div>
              </div>
            </section>
          </div>
        </div>

        <!-- Settings Page -->
        <div id="page-settings" class="page">
          <div class="settings-layout">
            <section class="settings-section">
              <div class="section-header">
                <h2>Settings</h2>
              </div>
              <div class="settings-card">
                <h3>Coach Mode Defaults</h3>
                <div class="form-group">
                  <label class="form-label" for="settings-coach-default"
                    >Default Mode</label
                  >
                  <select id="settings-coach-default" class="select-input">
                    <option value="boring">Boring B.O.B</option>
                    <option value="coach">Coach Mode</option>
                  </select>
                </div>
                <div class="form-group">
                  <label class="form-label" for="settings-coach-cooldown"
                    >Cooldown (days)</label
                  >
                  <input
                    type="number"
                    id="settings-coach-cooldown"
                    class="text-input"
                    min="1"
                    max="365"
                    value="7"
                  />
                </div>
              </div>
              <div class="settings-card">
                <h3>Per-Project Coach Mode</h3>
                <div id="settings-project-modes" class="checkbox-list"></div>
              </div>
              <div class="settings-card">
                <h3>Permissions</h3>
                <p class="settings-hint">
                  Current scope and allowed vault paths for template writes.
                </p>
                <div class="permissions-grid">
                  <div class="permission-item">
                    <span class="permission-label">Scope</span>
                    <span id="permissions-scope" class="permission-value"></span>
                  </div>
                  <div class="permission-item">
                    <span class="permission-label">Vault root</span>
                    <span id="permissions-vault-root" class="permission-value mono"></span>
                  </div>
                </div>
                <div class="permissions-section">
                  <h4>Allowed vault paths</h4>
                  <div id="permissions-paths" class="pill-list"></div>
                </div>
                <div class="permissions-section">
                  <h4>Connectors (read-only)</h4>
                  <div id="permissions-connectors" class="pill-list"></div>
                </div>
              </div>
              <div class="settings-card">
                <h3>Connectors</h3>
                <p class="settings-hint">
                  Import bookmarks and save highlights (requires browser_saves and scope
                  level 2+).
                </p>
                <div id="connectors-availability" class="connector-status"></div>
                <h4>Bookmarks Import</h4>
                <div class="form-group">
                  <label class="form-label" for="connectors-bookmarks-path"
                    >Bookmarks HTML path</label
                  >
                  <input
                    id="connectors-bookmarks-path"
                    class="text-input"
                    type="text"
                    placeholder="~/Downloads/bookmarks.html"
                  />
                </div>
                <div class="form-group">
                  <label class="form-label" for="connectors-bookmarks-project"
                    >Project</label
                  >
                  <input
                    id="connectors-bookmarks-project"
                    class="text-input"
                    type="text"
                    placeholder="main"
                  />
                </div>
                <div class="form-group">
                  <label class="form-label" for="connectors-bookmarks-language"
                    >Language</label
                  >
                  <input
                    id="connectors-bookmarks-language"
                    class="text-input"
                    type="text"
                    placeholder="en"
                  />
                </div>
                <button
                  id="connectors-bookmarks-import-btn"
                  class="btn btn-secondary"
                >
                  Import bookmarks
                </button>
                <div
                  id="connectors-bookmarks-status"
                  class="connector-status"
                ></div>
                <h4>Save Highlight</h4>
                <div class="form-group">
                  <label class="form-label" for="connectors-highlight-text"
                    >Highlight text</label
                  >
                  <textarea
                    id="connectors-highlight-text"
                    class="text-input"
                    rows="4"
                    placeholder="Paste the highlight text here"
                  ></textarea>
                </div>
                <div class="form-group">
                  <label class="form-label" for="connectors-highlight-url"
                    >Source URL</label
                  >
                  <input
                    id="connectors-highlight-url"
                    class="text-input"
                    type="text"
                    placeholder="https://example.com/article"
                  />
                </div>
                <div class="form-group">
                  <label class="form-label" for="connectors-highlight-project"
                    >Project</label
                  >
                  <input
                    id="connectors-highlight-project"
                    class="text-input"
                    type="text"
                    placeholder="main"
                  />
                </div>
                <div class="form-group">
                  <label class="form-label" for="connectors-highlight-language"
                    >Language</label
                  >
                  <input
                    id="connectors-highlight-language"
                    class="text-input"
                    type="text"
                    placeholder="en"
                  />
                </div>
                <button
                  id="connectors-highlight-save-btn"
                  class="btn btn-secondary"
                >
                  Save highlight
                </button>
                <div
                  id="connectors-highlight-status"
                  class="connector-status"
                ></div>
              </div>
              <button id="settings-save-btn" class="btn btn-primary">
                Save Settings
              </button>
              <div id="settings-status" class="settings-status"></div>
            </section>
          </div>
        </div>
        <!-- Health Page -->
        <div id="page-health" class="page">
          <div class="health-layout">
            <section class="health-signals-panel">
              <div class="section-header">
                <h2>Health Signals</h2>
                <p class="section-subtitle">
                  Failure metrics that drive the Fix Queue.
                </p>
              </div>
              <div id="failure-signals-list" class="health-signals-list">
                <div class="loading-placeholder">
                  Loading failure signals‚Ä¶
                </div>
              </div>
            </section>
            <section class="health-tasks-panel">
              <div class="health-tasks-header">
                <div>
                  <h2>Fix Queue</h2>
                  <p class="section-subtitle">
                    Prioritized cleanup tasks derived from feedback and lint signals.
                  </p>
                </div>
                <div class="health-tasks-actions">
                  <div class="health-filter">
                    <label class="filter-label" for="fixqueue-project-filter">Project</label>
                    <select id="fixqueue-project-filter" class="select-input"></select>
                  </div>
                  <button id="refresh-fixqueue-btn" class="btn btn-secondary btn-sm">
                    Refresh
                  </button>
                </div>
              </div>
              <div id="fixqueue-tasks-list" class="fixqueue-tasks-list">
                <div class="loading-placeholder">
                  Tasks will appear after we fetch the latest health data.
                </div>
              </div>
            </section>
          </div>
        </div>
      </main>

      <div id="note-modal" class="modal hidden" aria-hidden="true">
        <div
          class="modal-card"
          role="dialog"
          aria-modal="true"
          aria-labelledby="note-modal-title"
        >
          <div class="modal-header">
            <h3 id="note-modal-title">New note</h3>
            <button id="note-modal-close" class="btn btn-secondary btn-sm" type="button">
              Close
            </button>
          </div>
          <form id="note-form" class="modal-body">
            <div class="form-group">
              <label class="filter-label" for="note-template">Template</label>
              <select id="note-template" class="select-input"></select>
              <p id="note-template-hint" class="note-hint"></p>
            </div>
            <div class="form-group">
              <label class="filter-label" for="note-target-path">Target path</label>
              <input
                id="note-target-path"
                class="text-input"
                type="text"
                placeholder="vault-relative path (e.g., routines/daily/2025-01-01.md)"
                autocomplete="off"
              />
              <p class="note-hint">
                Relative paths resolve under your configured vault directory.
              </p>
            </div>
            <div class="form-grid">
              <div class="form-group">
                <label class="filter-label" for="note-project">Project</label>
                <input
                  id="note-project"
                  class="text-input"
                  type="text"
                  list="note-project-options"
                  autocomplete="off"
                />
                <datalist id="note-project-options"></datalist>
              </div>
              <div class="form-group">
                <label class="filter-label" for="note-date">Date</label>
                <input id="note-date" class="date-input" type="date" />
              </div>
              <div class="form-group">
                <label class="filter-label" for="note-language">Language</label>
                <input
                  id="note-language"
                  class="text-input"
                  type="text"
                  value="en"
                  autocomplete="off"
                />
              </div>
            </div>
            <div id="note-extra-fields" class="form-grid"></div>
            <div class="modal-actions">
              <button class="btn btn-primary" type="submit">Create note</button>
              <button id="note-cancel-btn" class="btn btn-secondary" type="button">
                Cancel
              </button>
            </div>
            <div id="note-status" class="note-status hidden"></div>
            <div id="note-result" class="note-result hidden">
              <div>
                <strong>Saved to:</strong>
                <span id="note-result-path" class="note-result-path"></span>
              </div>
              <div id="note-result-warnings" class="note-result-warnings"></div>
              <button id="note-open-btn" class="btn btn-secondary btn-sm" type="button">
                Open note
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>

    <script src="/static/js/api.js"></script>
    <script src="/static/js/app.js"></script>
  </body>
</html>
